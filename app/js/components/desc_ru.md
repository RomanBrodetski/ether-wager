## Описание

Ether-Wager - это децентрализованная биржа для торговли Контрактами на Разницу Цен (CfD) над любыми активами. Биржа реализована на платформе Ethereum. Все сделки происходят напрямую между участниками договоренности, без посредников. Честность торгов обеспечивается с помощью smart contract'a, размещенного в сети Ethereum.

## Контракты на Разницу Цен


В каждой сделке участвует две стороны. Один участник сделки ставит на увеличение цены актива, другой - на ее уменьшение. После наступления заранее оговоренного срока, любой участник может исполнить контракт, и средства будут распределены между участниками согласно проценту изменения цены актива. Подробнее см. в разделе help на [eth-wager.surge.sh](http://eth-wager.surge.sh/).



## Технологии
smart contract: solidity, embark framework
frontend: react + es6

## Функции и свойства биржи

* Торговля Контрактами на Разницу Цен:
  * order book (биржевой стакан);
  * фиксированное индивидуальное плечо на каждую сделку;
  * фиксированное maturity time для каждой сделки.
* Использование платформы Ethereum:
  * отсутствие сервера. Вся логика реализована на смарт контракте;
  * участники совершают сделку, пересылая равные депозиты на смарт контракт. Средства блокируются до наступления maturity time;
* Использование оракула:
  * для получения цены актива на платформе Ethereum необходимо использование оракула;
  * в качестве оракула может быть использован любой url, возвращающий данные в формате json;
  * см. проект [Oracul](https://medium.com/@roman.brodetski/introducing-oracul-decentralized-oracle-data-feed-solution-for-ethereum-5cab1ca8bb64)


## Текущее состояние

* Реализованы и функционируют все основные функции биржи;
* произведена установка в тестовой сети Ethereum Kovan;
* работы, необходимые перед запуском в mainnet:
  * аудит smart-contract'a;
  * написание/выбор надежного оракула
  * обработка ошибок в значениях, возвращаемых оракулом (или обработка недоступности оракула);
  * опционально: поиск поставщиков ликвидности;
  * опционально: реализация safe switch (возможность отменить все активные контракты в случае атаки/критической ошибки)
  * опционально: настройка комиссии

## Риски

Проект реализован на платформе Eteherum, что влечет к характерным рискам/недостаткам:

* Основной риск в вероятности наличия критической уязвимости в smart contract'e или в используемых библиотеках. Если злоумышленник найдет ее первой, он может получить доступ ко всем депозитам, то есть к средствам всех активных контрактов, что повлечет к финансовым и репутационным потерям. В силу неизменяемой природы блокчейна, быстрое и эффективное исправление ошибок в работающих системах затруднено. Независимый аудит позволит снизить вероятность такого равития событий.
* Все операции на платформе Ethereum требуют уплаты комиссии майнерам. В текущей версии Ethereum эту комиссию должны платить пользователя smart contract'a, то есть клиенты биржи (в скором времени планируется поддержать возможность оплаты этой комисси со счета самого smart contract'a). Размер комиссии определяется переменными gas price и gas limit и зависит от сложности smart contract'a и нагруженности плтаформы. Сейчас в Ether-wager операции потребляют 200 - 400 тысяч единиц газа, что, при gas price равному 5 Gwei и по текущему курсу за Ether составляет 0.3 - 0.5$. Для полного цикла торговли каждый из участников должен выполнить не менее трех запросов к smart contract.
* Чтобы операция считалась выполненной, соотвествующая блокчейн-транзакции должна получить хотя бы одно подтверждение. Это время зависит от выставленной gas price и загруженности системы, и может составлять до нескольких минут. Это может быть недостатком для пользователя, привыкшего к обычным биржам.
* Возможна манипуляция результатом со стороны владельцев используемого в качестве оракула url (сейчас испольуетя Yahoo Finance API, но оно не документировано: они могут без предупреждения прекратить поддержу).




